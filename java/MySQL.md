## MySQL数据库 ##
## 红黑树 ##
红黑树是一颗特殊的平衡二叉查找树：

- 每个节点要么是黑色，要么是红色
- 根节点必须是黑色
- 红色节点不能连续
- 每条路经上的黑色节点数必须相同

## B树（常说的B-树就是指B树） ##
B树是一颗特殊的多叉平衡查找树：考虑到随着二叉查找树的高度的加深，查找效率也越来越低。如果所有节点都存储在磁盘上，那么IO操作次数将会增加从而导致查找效率低，为此，B树将二叉树扩展到多叉树，使每个节点保存尽可能多的节点信息，减少IO次数。对于一个m阶的B树

- 每个节点最多有m个子树
- 除根结点外，其它每个分支至少有ceil(m/2)个子树
- 根节点至少有两个子树
- 有j个子树的非叶子节点恰好有j-1的关键码，关键码递增顺序排列

**一棵含有N个总关键字数的m阶的B树的最大高度是：(log_ceil(m/2) (N+1)/2)+1;**

**B树的最小度：一个最小度为t的B树，每个节点最多包含2t−1个关键字；除根节点外的每个节点至少有t−1个关键字**

m阶B树的**插入**过程：m阶的B树每个节点最多只能有m-1个关键码，每个节点最多只能有m个子节点

- 如果B树为空，那么新建一个节点，将关键码插入；
- 如果当前节点的关键码个数小于m-1，那么，直接插入到这个节点中的合适位置（保持递增）
- 如果当前节点的关键码个数为m-1，那么将产生分裂活动，算上这个待插入的关键码，加上这个节点上的m-1个关键码，找到中间的一个关键码，中间的关键码上升为父节点，中间码左边和右边的分别为两个子节点。
- 如果上一层的关键码也是m-1，那么继续找出此时的中间码，然后把此时的中间码往上升，直到找到合适的位置插入或者到根节点。

m阶B树的**删除**过程：m阶B树每个节点最少要有ceil(m/2)-1个关键码

- 如果待删除的关键码在叶子节点上，如果这个节点中关键码的个数大于等于ceil(m/2)，即删除这个关键码仍然满足B树特性，可以直接删除这个关键码，将这个关键码右边的关键码左移覆盖这个关键码。
- 如果待删除的关键码不在叶子节点上，如果右子树中的关键码个数大于等于ceil(m/2)，那么用右子树中的最左边的关键码替换待删除关键码。
- 如果这个节点中关键码的个数等于ceil(m/2)-1，删除一个关键码之后将不满足B树，此时如果这个节点的某个兄弟节点中的关键码个数大于等于ceil(m/2)，那么这个节点可以向父节点借一个关键码覆盖待删除的关键码，然后将最饱满的的兄弟节点中的一个关键码上升到父节点中。如果这个节点的兄弟结点中的关键码个数都是ceil(m/2)-1，此时这个节点需要从父节点中借一个关键码覆盖待删除的关键码，然后将这个节点和左边或者右边的兄弟节点合并。此时，由于向父节点借了一个关键码，父节点的关键码个数可能不满足大于等于ceil(m/2)，因此此时父节点又变成问题节点，问题节点同样需要判断是否有某个兄弟节点中的关键码个数大于等于ceil(m/2)，如果有，那么向父节点借一个关键码，然后用最饱满的兄弟节点去填补父节点；如果兄弟结点都不满足条件，那么需要进一步合并。

## B+树 ##
B+树是B树的一种变形，常用于数据库和文件的索引，如MySQL中的索引就是基于B+树实现。相对于B树，B+树有如下的特性

- 内部节点并不保存真正的信息，只保存到其叶子节点的最小值的索引。
- 所有的数据都保存在叶子节点中。
- 每个节点中的关键字的数量和子节点的数量是相等的。（B树中关键字的数量与子节点的数量差1）
- 由于每个节点中保存了更少的指针，因此一个磁盘IO能够找到更多的关键字，从而减少IO次数
- 由于所有的数据都保存在叶子节点中，因此具有稳定的log级别的查找效率